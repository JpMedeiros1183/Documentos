<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-M">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questionário para Análise de Ação Trabalhista</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        .container {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 800px;
            margin: auto;
        }
        h1, h2 {
            color: #0056b3;
            text-align: center;
            margin-bottom: 20px;
        }
        h3 {
            color: #0056b3;
            margin-top: 30px;
            margin-bottom: 15px;
            border-bottom: 2px solid #e2f0ff;
            padding-bottom: 5px;
        }
        .question-group {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            background-color: #fcfcfc;
        }
        .question-group strong {
            display: block;
            margin-bottom: 10px;
            color: #004085;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #555;
        }
        input[type="text"],
        input[type="date"],
        input[type="email"],
        input[type="tel"],
        textarea {
            width: calc(100% - 20px);
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 1rem;
        }
        textarea {
            min-height: 80px;
            resize: vertical;
        }
        .notes {
            font-size: 0.9em;
            color: #777;
            margin-top: -10px;
            margin-bottom: 10px;
            padding-left: 5px;
        }
        .action-buttons-container {
            text-align: center;
            margin-top: 30px;
            min-height: 60px; /* Para evitar salto quando o botão aparece */
        }
        .action-button {
            background-color: #007bff;
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1rem;
            transition: background-color 0.3s ease;
            margin: 0 auto; /* Centraliza o único botão */
            display: inline-block;
        }
        .action-button:hover {
            background-color: #0056b3;
        }
        .instructions-box {
            background-color: #e2f0ff;
            border: 1px solid #cce5ff;
            padding: 20px;
            margin-top: 25px;
            border-radius: 8px;
            font-size: 1.1em;
            color: #004085;
            text-align: left;
        }
        .instructions-box ol {
            padding-left: 20px;
        }
        .instructions-box li {
            margin-bottom: 10px;
        }
        #pdfContent { /* ID do div que será convertido em PDF */
            padding: 20px; /* Adiciona um padding para o PDF gerado */
        }
        /* Estilos específicos para a visualização no PDF (escondem o formulário original) */
        .html2pdf__page {
            box-sizing: border-box;
            padding: 20mm; /* Margens para o PDF */
            background-color: #fff;
        }
        /* Oculta botões e instruções na versão que será convertida em PDF */
        .html2pdf_hide_on_pdf {
            display: none !important;
        }
        /* Mensagem de sucesso */
        #successMessage {
            color: #28a745;
            font-weight: bold;
            margin-top: 15px;
            text-align: center;
            display: none; /* Escondida por padrão */
        }
        /* Estilos para impressão do navegador */
        @media print {
            body {
                background-color: #fff;
                margin: 0;
            }
            .container {
                box-shadow: none;
                border-radius: 0;
                padding: 0;
            }
            input[type="text"],
            input[type="date"],
            input[type="email"],
            input[type="tel"],
            textarea {
                border: none;
                border-bottom: 1px dashed #999;
                background: none;
                padding: 0 5px;
                margin-bottom: 10px;
            }
            textarea {
                min-height: 60px;
                resize: none;
            }
            .question-group {
                border: none;
                background-color: #fff;
                padding: 0;
                margin-bottom: 10px;
            }
            .notes {
                color: #555;
            }
            .action-buttons-container, .instructions-box, #successMessage {
                display: none; /* Oculta botões, instruções e mensagem na impressão do navegador */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="pdfContent">
            <div class="html2pdf_hide_on_pdf">
                <h1>Questionário para Análise de Ação Trabalhista</h1>
                <h2>Preencha os campos abaixo com as informações solicitadas para que possamos analisar sua situação e quantificar seus direitos trabalhistas.</h2>
                <p style="text-align: center; font-style: italic; color: #666;">Ao finalizar, clique no botão abaixo para gerar e baixar o PDF com suas respostas.</p>
            </div>

            <form id="questionarioForm">

                <h3>I. Dados Pessoais e Contrato de Trabalho</h3>
                <div class="question-group">
                    <strong>Dados do Trabalhador:</strong>
                    <label for="nome_completo">Nome completo:</label>
                    <input type="text" id="nome_completo" name="Nome Completo" required>
                    <label for="cpf">CPF:</label>
                    <input type="text" id="cpf" name="CPF" required>
                    <label for="rg">RG:</label>
                    <input type="text" id="rg" name="RG">
                    <label for="data_nascimento">Data de Nascimento:</label>
                    <input type="date" id="data_nascimento" name="Data de Nascimento">
                    <label for="endereco">Endereço completo (Rua, Número, Bairro, Cidade, Estado, CEP):</label>
                    <textarea id="endereco" name="Endereço Completo"></textarea>
                    <label for="telefone">Telefone:</label>
                    <input type="tel" id="telefone" name="Telefone" required>
                    <label for="email_cliente">E-mail:</label>
                    <input type="email" id="email_cliente" name="Email do Cliente" required>
                    <div class="notes html2pdf_hide_on_pdf">Para qualificação da ação e contato.</div>
                </div>

                <div class="question-group">
                    <strong>Dados da Empresa (Empregadora):</strong>
                    <label for="razao_social">Nome completo (razão social) da empresa:</label>
                    <input type="text" id="razao_social" name="Razão Social da Empresa" required>
                    <label for="cnpj">CNPJ da empresa:</label>
                    <input type="text" id="cnpj" name="CNPJ da Empresa">
                    <label for="endereco_empresa">Endereço completo da empresa:</label>
                    <textarea id="endereco_empresa" name="Endereço da Empresa"></textarea>
                    <label for="responsavel_empresa">Nome do responsável da empresa (RH/Sócio, se souber):</label>
                    <input type="text" id="responsavel_empresa" name="Responsável da Empresa">
                    <div class="notes html2pdf_hide_on_pdf">Para qualificação da ação e notificação.</div>
                </div>

                <div class="question-group">
                    <strong>Contrato de Trabalho:</strong>
                    <label for="copia_contrato">Você possui cópia do contrato de trabalho (se houver)?</label>
                    <input type="text" id="copia_contrato" name="Cópia Contrato Trabalho" placeholder="Sim / Não / Parcialmente">
                    <label for="data_inicio">Data de início da sua prestação de serviços (dia/mês/ano):</label>
                    <input type="date" id="data_inicio" name="Data de Início">
                    <label for="data_saida">Data de saída (se já ocorreu) (dia/mês/ano):</label>
                    <input type="date" id="data_saida" name="Data de Saída">
                    <label for="cargo_funcao">Qual era seu cargo/função registrada no contrato de trabalho?</label>
                    <input type="text" id="cargo_funcao" name="Cargo/Função Contratada">
                    <label for="salario_inicial">Qual era o seu salário inicial e quais foram os últimos salários recebidos? Por favor, discrimine o valor nominal e o valor total com adicionais, se houver:</label>
                    <textarea id="salario_inicial" name="Salários Recebidos"></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Essencial para verificar a relação empregatícia, tempo de serviço e base de cálculo para verbas.</div>
                </div>

                <div class="question-group">
                    <strong>Registro em CTPS (Carteira de Trabalho e Previdência Social):</strong>
                    <label for="copia_ctps">Você possui cópia da sua CTPS (página da foto, qualificação civil, contrato de trabalho, anotações de férias, aumentos salariais)?</label>
                    <input type="text" id="copia_ctps" name="Cópia CTPS" placeholder="Sim / Não / Parcialmente">
                    <div class="notes html2pdf_hide_on_pdf">Para comprovar o vínculo, data de início, função e salários. Verificar se há divergências.</div>
                </div>

                <h3>II. Jornada de Trabalho</h3>
                <div class="question-group">
                    <label for="carga_horaria_contratual">Qual a carga horária estabelecida no seu contrato de trabalho (ex: 8h/dia, 44h/semana)?</label>
                    <input type="text" id="carga_horaria_contratual" name="Carga Horária Contratual">
                    <div class="notes html2pdf_hide_on_pdf">Base para identificar horas extras.</div>
                </div>

                <div class="question-group">
                    <label for="jornada_praticada">Descreva detalhadamente a sua jornada de trabalho diária efetivamente praticada (horário de entrada, saída, tempo e horário de intervalo para almoço/descanso):</label>
                    <textarea id="jornada_praticada" name="Jornada Praticada" placeholder="Ex: De segunda a sexta, das 8h às 18h, com 30min de intervalo das 12h às 12h30. Sábados das 8h às 12h."></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Essencial para calcular horas extras, intrajornada, etc.</div>
                </div>

                <div class="question-group">
                    <label for="qtd_horas_extras">Quantas horas extras você estima ter feito por dia/semana/mês?</label>
                    <input type="text" id="qtd_horas_extras" name="Quantidade Horas Extras Estimada">
                    <label for="registro_ponto">A empresa mantinha registro de ponto (cartões de ponto, folha de ponto, sistema digital, etc.)? Se sim, você possui cópias?</label>
                    <input type="text" id="registro_ponto" name="Registro Ponto Existe?" placeholder="Sim / Não / Parcialmente">
                    <div class="notes html2pdf_hide_on_pdf">Para comprovar o labor extraordinário. Se não houver registro, outros meios de prova serão necessários (testemunhas, e-mails, mensagens).</div>
                </div>

                <div class="question-group">
                    <label for="pagamento_horas_extras">As horas extras eram pagas? Se sim, elas constavam no seu contracheque ou eram pagas "por fora"? Qual o valor pago (se souber)?</label>
                    <textarea id="pagamento_horas_extras" name="Pagamento Horas Extras"></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Verificar a regularidade do pagamento e a existência de pagamento "por fora".</div>
                </div>

                <div class="question-group">
                    <label for="duracao_intervalo">Qual a duração do seu intervalo para almoço/descanso? Era gozado integralmente ou era interrompido/reduzido?</label>
                    <textarea id="duracao_intervalo" name="Duração Intervalo Intrajornada"></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Verificar supressão ou concessão parcial do intervalo (art. 71, CLT).</div>
                </div>

                <div class="question-group">
                    <label for="dsr">Você tinha folga semanal (Descanso Semanal Remunerado - DSR)? Quantas por semana? Era sempre no mesmo dia? Houve trabalho em DSR ou feriados? Se sim, esses dias foram pagos em dobro?</label>
                    <textarea id="dsr" name="DSR e Feriados Trabalhados"></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Verificar o gozo do DSR e o pagamento correto de feriados trabalhados.</div>
                </div>

                <h3>III. Salário e Verbas Trabalhistas</h3>
                <div class="question-group">
                    <label for="copia_contracheques">Você possui cópias de todos os seus contracheques/holerites desde o início do contrato?</label>
                    <input type="text" id="copia_contracheques" name="Cópia Contracheques" placeholder="Sim / Não / Parcialmente">
                    <div class="notes html2pdf_hide_on_pdf">Prova fundamental para comprovar salários pagos, descontos, adicionais e o não pagamento de verbas.</div>
                </div>

                <div class="question-group">
                    <label for="adicionais">Você recebia algum adicional (noturno, periculosidade, insalubridade)? Se sim, era pago corretamente e em qual percentual?</label>
                    <textarea id="adicionais" name="Adicionais Recebidos"></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Verificar o direito a adicionais e se o pagamento era devido e correto.</div>
                </div>

                <div class="question-group">
                    <label for="desvio_funcao">Detalhe as funções para as quais você foi contratado e as funções que efetivamente exercia. Descreva as novas funções e quando elas começaram. (Ex: "Fui contratado como motorista de carro pequeno, mas desde [mês/ano] passei a dirigir ônibus grande sem alteração de contrato ou salário")</label>
                    <textarea id="desvio_funcao" name="Desvio/Acúmulo de Função" rows="6"></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Para comprovar o desvio ou acúmulo e fundamentar o pedido de diferenças salariais ou equiparação.</div>
                </div>

                <div class="question-group">
                    <label for="reajustes_salariais">Houve reajustes salariais durante o contrato? Se sim, quais as datas e valores de cada reajuste?</label>
                    <textarea id="reajustes_salariais" name="Reajustes Salariais"></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Verificar se os reajustes foram aplicados conforme a legislação ou acordos/convenções coletivas.</div>
                </div>

                <div class="question-group">
                    <label for="beneficios">Quais benefícios a empresa oferecia (vale-transporte, vale-alimentação/refeição, plano de saúde, outros)? Como eles eram concedidos (pagos, descontados)? (Ex: "Recebia vale-alimentação, mas o valor era menor do que o prometido e era 'descontado como carro'")</label>
                    <textarea id="beneficios" name="Benefícios Recebidos"></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Verificar a regularidade dos benefícios e possíveis irregularidades.</div>
                </div>

                <div class="question-group">
                    <label for="fgts">Os depósitos de FGTS foram feitos regularmente? Você possui extrato do FGTS?</label>
                    <input type="text" id="fgts" name="Depósitos FGTS" placeholder="Sim / Não / Não sei / Parcialmente">
                    <div class="notes html2pdf_hide_on_pdf">Verificar a regularidade dos depósitos.</div>
                </div>

                <h3>IV. Rescisão Contratual (se aplicável)</h3>
                <div class="question-group">
                    <label for="tipo_rescisao">Se o contrato já foi encerrado, qual o tipo de rescisão (sem justa causa, com justa causa, pedido de demissão, fim de contrato por prazo determinado, etc.)?</label>
                    <input type="text" id="tipo_rescisao" name="Tipo de Rescisão">
                    <div class="notes html2pdf_hide_on_pdf">Para verificar as verbas rescisórias devidas.</div>
                </div>

                <div class="question-group">
                    <label for="trct">Você possui cópia do Termo de Rescisão de Contrato de Trabalho (TRCT) e comprovante de pagamento das verbas rescisórias?</label>
                    <input type="text" id="trct" name="Cópia TRCT" placeholder="Sim / Não / Parcialmente">
                    <div class="notes html2pdf_hide_on_pdf">Para verificar o que foi pago na rescisão e o que ficou pendente.</div>
                </div>

                <div class="question-group">
                    <label for="seguro_desemprego">A empresa forneceu a guia do seguro-desemprego?</label>
                    <input type="text" id="seguro_desemprego" name="Guia Seguro-Desemprego" placeholder="Sim / Não / Não tinha direito">
                    <div class="notes html2pdf_hide_on_pdf">Verificar o direito e a habilitação ao seguro-desemprego.</div>
                </div>

                <h3>V. Assédio Moral/Perseguição</h3>
                <div class="question-group">
                    <label for="detalhes_assedio">Descreva detalhadamente os episódios de perseguição/assédio: datas (mesmo que aproximadas), locais, quem estava envolvido (agressor e testemunhas), o que foi dito ou feito, e quais foram as consequências para você.</label>
                    <textarea id="detalhes_assedio" name="Detalhes Assédio/Perseguição" rows="8"></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Para fundamentar o pedido de indenização por danos morais. Seja o mais específico possível.</div>
                </div>

                <div class="question-group">
                    <label for="provas_assedio">Você possui provas desses incidentes (e-mails, mensagens, gravações, fotos, vídeos, atestados médicos, relatos de outras pessoas)? Por favor, liste quais.</label>
                    <textarea id="provas_assedio" name="Provas Assédio/Perseguição"></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Essencial para comprovar o assédio.</div>
                </div>

                <div class="question-group">
                    <label for="impacto_saude">O assédio ou a situação no trabalho causou algum impacto na sua saúde física ou mental (estresse, ansiedade, depressão, etc.)? Você possui laudos médicos, atestados ou faz tratamento psicológico/psiquiátrico?</label>
                    <textarea id="impacto_saude" name="Impacto na Saúde (Assédio)"></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Para corroborar o pedido de danos morais e, eventualmente, pensão por danos materiais (se houver afastamento).</div>
                </div>

                <h3>VI. Provas e Testemunhas</h3>
                <div class="question-group">
                    <label for="documentos_gerais">Você possui qualquer outro documento que possa ser útil (comprovantes de pagamento diversos, avisos, comunicados da empresa, etc.)?</label>
                    <textarea id="documentos_gerais" name="Documentos Gerais Adicionais"></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Qualquer documento pode ser útil, mesmo que pareça insignificante.</div>
                </div>

                <div class="question-group">
                    <label for="testemunhas">Você tem nomes, contatos e breve descrição do que cada testemunha presenciou? (Pessoas que trabalharam com você e viram as situações, familiares, amigos, etc.)</label>
                    <textarea id="testemunhas" name="Testemunhas (Nomes e Contatos)" rows="6"></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Essencial para comprovar fatos alegados, especialmente horas extras, desvio de função e assédio.</div>
                </div>

                <div class="question-group">
                    <label for="conversas_prints">Você possui prints de conversas de WhatsApp, e-mails, SMS ou outros registros digitais que comprovem a situação (ex: cobrança excessiva, reclamação de horas, alteração de função, mensagens do RH)?</label>
                    <textarea id="conversas_prints" name="Conversas/Prints"></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Podem servir como indícios ou provas robustas.</div>
                </div>

                <h3>VII. Outras Informações Relevantes</h3>
                <div class="question-group">
                    <label for="situacao_atual_cliente">Você ainda está trabalhando na empresa? Se sim, como está a situação atualmente?</label>
                    <input type="text" id="situacao_atual_cliente" name="Situação Atual do Cliente">
                    <div class="notes html2pdf_hide_on_pdf">Para avaliar a urgência da medida ou se há risco de dispensa.</div>
                </div>

                <div class="question-group">
                    <label for="reclamacoes_anteriores">Você já reclamou formalmente à empresa sobre essas questões (RH, gerente, superior)? Houve alguma reunião ou tentativa de solução interna?</label>
                    <textarea id="reclamacoes_anteriores" name="Reclamações Anteriores à Empresa"></textarea>
                    <div class="notes html2pdf_hide_on_pdf">Para verificar se a empresa estava ciente e se houve inércia.</div>
                </div>

                <div class="question-group">
                    <label for="conhecimento_empresa">O RH ou a gerência tinham conhecimento das irregularidades que você descreveu?</label>
                    <input type="text" id="conhecimento_empresa" name="Conhecimento Empresa Irregularidades" placeholder="Sim / Não / Parcialmente">
                    <div class="notes html2pdf_hide_on_pdf">Para verificar a responsabilidade da empresa.</div>
                </div>

                <div class="question-group">
                    <label for="sindicato">Você é filiado a algum sindicato? O sindicato foi procurado para mediação ou orientação?</label>
                    <input type="text" id="sindicato" name="Filiado Sindicato?" placeholder="Sim / Não / Não procurei">
                    <div class="notes html2pdf_hide_on_pdf">O sindicato pode ter informações sobre acordos/convenções coletivas e auxiliar na mediação.</div>
                </div>

            </form>
        </div>
        <div class="action-buttons-container">
            <button type="button" class="action-button" id="generatePdfButton" onclick="generatePdf()">Gerar e Baixar PDF</button>
        </div>

        <p id="successMessage" style="display: none;">PDF gerado e baixado com sucesso!</p>

        <div class="instructions-box">
            <h4>Instruções Detalhadas para Salvar o PDF:</h4>
            <ol>
                <li>Preencha cuidadosamente todo o formulário com as informações solicitadas.</li>
                <li>Clique no botão **"<span style="color: #007bff; font-weight: bold;">Gerar e Baixar PDF</span>"**.</li>
                <li>Um arquivo PDF com suas respostas será **automaticamente baixado** para a pasta "Downloads" (ou equivalente) do seu dispositivo.</li>
                <li>**Aguarde o download do PDF ser concluído.** Você verá uma notificação do seu navegador e a mensagem "PDF gerado e baixado com sucesso!" aparecerá.</li>
            </ol>
            <p><strong>Importante:</strong> Este arquivo é uma cópia das suas respostas. Guarde-o em um local seguro.</p>
        </div>
    </div>

    <script>
        function generatePdf() {
            const element = document.getElementById('pdfContent');
            const nomeCliente = document.getElementById('nome_completo').value || 'Cliente';

            document.getElementById('successMessage').style.display = 'none';

            // Array para armazenar os elementos de formulário originais para reversão
            const formElementsToRestore = [];

            // Preparar os campos do formulário para a captura
            const formInputs = element.querySelectorAll('#questionarioForm input, #questionarioForm textarea');

            formInputs.forEach(input => {
                // Para inputs, defina como 'readonly' e desative a borda e background
                if (input.tagName === 'INPUT') {
                    input.setAttribute('readonly', 'readonly');
                    input.style.border = 'none';
                    input.style.backgroundColor = 'transparent';
                    input.style.color = '#333'; // Para garantir a cor do texto
                    // Se houver um placeholder e o campo estiver vazio, use o placeholder como valor visível
                    if (input.value === '' && input.placeholder) {
                        input.value = `(${input.placeholder})`; // Exibe placeholder no campo para o PDF
                        input.style.fontStyle = 'italic';
                        input.style.color = '#777';
                    }
                }
                // Para textareas, defina como 'disabled' e desative a borda e background
                else if (input.tagName === 'TEXTAREA') {
                    input.setAttribute('disabled', 'disabled');
                    input.style.border = 'none';
                    input.style.backgroundColor = 'transparent';
                    input.style.color = '#333'; // Para garantir a cor do texto
                    // Se houver um placeholder e o campo estiver vazio, use o placeholder como valor visível
                    if (input.value === '' && input.placeholder) {
                        input.value = `(${input.placeholder})`; // Exibe placeholder no campo para o PDF
                        input.style.fontStyle = 'italic';
                        input.style.color = '#777';
                    }
                }
                formElementsToRestore.push(input); // Adiciona para restauração futura
            });

            // Temporariamente oculta o container de botões e a caixa de instruções na versão que vai para o PDF
            const buttonsContainer = document.querySelector('.action-buttons-container');
            const instructionsBox = document.querySelector('.instructions-box');
            buttonsContainer.classList.add('html2pdf_hide_on_pdf');
            instructionsBox.classList.add('html2pdf_hide_on_pdf');

            const opt = {
                margin: 10,
                filename: `Questionario_Trabalhista_${nomeCliente.replace(/[^a-zA-Z0-9]/g, '_')}.pdf`,
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2, logging: true, dpi: 192, letterRendering: true },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' },
                pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }
            };

            html2pdf().set(opt).from(element).save().then(function() {
                // Reverter as alterações nos campos do formulário
                formElementsToRestore.forEach(input => {
                    if (input.tagName === 'INPUT') {
                        input.removeAttribute('readonly');
                        input.style.border = ''; // Restaura a borda original (ou defina para a cor padrão)
                        input.style.backgroundColor = ''; // Restaura o background
                        input.style.color = ''; // Restaura a cor do texto
                        if (input.value.startsWith('(') && input.value.endsWith(')') && input.placeholder) {
                            input.value = ''; // Limpa o valor se era apenas o placeholder temporário
                        }
                        input.style.fontStyle = '';
                    } else if (input.tagName === 'TEXTAREA') {
                        input.removeAttribute('disabled');
                        input.style.border = '';
                        input.style.backgroundColor = '';
                        input.style.color = '';
                        if (input.value.startsWith('(') && input.value.endsWith(')') && input.placeholder) {
                            input.value = ''; // Limpa o valor se era apenas o placeholder temporário
                        }
                        input.style.fontStyle = '';
                    }
                });

                // Reexibe os elementos de UI após a geração do PDF
                buttonsContainer.classList.remove('html2pdf_hide_on_pdf');
                instructionsBox.classList.remove('html2pdf_hide_on_pdf');

                // Exibe a mensagem de sucesso
                document.getElementById('successMessage').style.display = 'block';

                // Rola para a área do botão para que o usuário veja a mensagem
                document.getElementById('generatePdfButton').scrollIntoView({ behavior: 'smooth', block: 'center' });
            }).catch(error => {
                console.error("Erro ao gerar PDF:", error);
                alert("Ocorreu um erro ao gerar o PDF. Por favor, tente novamente ou verifique o console para mais detalhes.");
                // Garantir que os campos sejam restaurados mesmo em caso de erro
                formElementsToRestore.forEach(input => {
                    if (input.tagName === 'INPUT') {
                        input.removeAttribute('readonly');
                        input.style.border = '';
                        input.style.backgroundColor = '';
                        input.style.color = '';
                        if (input.value.startsWith('(') && input.value.endsWith(')') && input.placeholder) {
                            input.value = '';
                        }
                        input.style.fontStyle = '';
                    } else if (input.tagName === 'TEXTAREA') {
                        input.removeAttribute('disabled');
                        input.style.border = '';
                        input.style.backgroundColor = '';
                        input.style.color = '';
                        if (input.value.startsWith('(') && input.value.endsWith(')') && input.placeholder) {
                            input.value = '';
                        }
                        input.style.fontStyle = '';
                    }
                });
                buttonsContainer.classList.remove('html2pdf_hide_on_pdf');
                instructionsBox.classList.remove('html2pdf_hide_on_pdf');
            });
        }
    </script>
</body>
</html>